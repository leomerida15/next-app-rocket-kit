"use strict";(self.webpackChunkdocument=self.webpackChunkdocument||[]).push([[9112],{44:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var r=t(2488),o=t(4728);const s={sidebar_position:2,sidebar_label:"Route Module \ud83d\udd03",sidebar_class_name:"green"},i="Route Module \ud83d\udd03",a={id:"tools-we-offer/route-module",title:"Route Module \ud83d\udd03",description:"This tool helps to quickly create an endpoint using the next.js API folder.",source:"@site/docs/tools-we-offer/route-module.md",sourceDirName:"tools-we-offer",slug:"/tools-we-offer/route-module",permalink:"/next-rocket-kit/docs/tools-we-offer/route-module",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,sidebar_label:"Route Module \ud83d\udd03",sidebar_class_name:"green"},sidebar:"tutorialSidebar",previous:{title:"Note \ud83d\uddd2\ufe0f",permalink:"/next-rocket-kit/docs/tools-we-offer/note"},next:{title:"Prisma module \ud83d\udcdd",permalink:"/next-rocket-kit/docs/tools-we-offer/prisma-module"}},l={},c=[{value:"Configuration object for Route",id:"configuration-object-for-route",level:2},{value:"Examples",id:"examples",level:2},{value:"End Point with route parameters",id:"end-point-with-route-parameters",level:3},{value:"Schemas",id:"schemas",level:4},{value:"EndPoint",id:"endpoint",level:4}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"route-module-",children:"Route Module \ud83d\udd03"}),"\n",(0,r.jsxs)(n.p,{children:["This tool helps to quickly create an endpoint using the ",(0,r.jsx)(n.strong,{children:"next.js"})," ",(0,r.jsx)(n.strong,{children:"API"})," folder."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'// "path file" ~ ./utils/rocketKit\n\nimport { createRocket } from "next-rocket-kit";\n\nexport const { onRoute } = createRocket();\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// "path file" ~ ./utils/Route\n"use server";\n\nimport { onRoute } from "./rocketKit";\n\nexport const { Route } = onRoute();\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// "path file" ~ ./src/app/api/route.ts\nimport { Route } from "@/utils/Route";\n\n// End Point GET basic\nexport const GET = Route({\n  Handler(req, reply, context) {\n    return reply.json({ message: "Hello World!" }, { status: 201 });\n  },\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"configuration-object-for-route",children:"Configuration object for Route"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Handler:"})," is the function that is executed when calling the end point. With the rocket ",(0,r.jsx)(n.strong,{children:"Route"})," it is much easier for us to create endpoints, such as a GET method endpoint.\nThe handler function receives three parameters to handle and control the request video cycle, these parameters are as follows."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["req: Everything that arrives from the client and gives access to all the native methods of ",(0,r.jsx)(n.strong,{children:"NextRequest"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Rocket functions in req."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"req.getBody(): return body."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"req.getQuery(): return queries."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"req.getContext(): return context include path params."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"req.getHeaders(): return headers."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["reply: used to reply to the client and gives access to all the native methods of ",(0,r.jsx)(n.strong,{children:"NextResponse"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["context (The native context of ",(0,r.jsx)(n.strong,{children:"nextjs"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Schema (Schema valid):"}),"\nThe schemas attribute allows you to validate the type and format of the data that enters and leaves the ",(0,r.jsx)(n.strong,{children:"Route"}),", to handle these validations ",(0,r.jsx)(n.strong,{children:"Route"})," is compatible with two possible third party libraries, ",(0,r.jsx)(n.strong,{children:'"zod"'})," and ",(0,r.jsx)(n.strong,{children:'"yup"'}),". By default, ",(0,r.jsx)(n.code,{children:"createRocketKit()"})," uses ",(0,r.jsx)(n.strong,{children:'"zod"'})," as the validation library."]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note \ud83d\udce6:"})," the route params is in header."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// "path file" ~ ./src/app/api/route.ts\nimport { Route } from "@/utils/Route";\n\n// End Point GET basic\nexport const POST = Route({\n  schemas: {\n    body: Schema,\n    query: Schema,\n    context: Schema,\n    headers: Schema,\n    response: Schema,\n  },\n  Handler(req, reply, context) {\n    return reply.json({ message: "Hello World!" }, { status: 201 });\n  },\n});\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The Schemas attribute uses a life cycle to execute the validations, the order of that life cycle is as follows."}),"\n",(0,r.jsx)(n.mermaid,{value:"graph LR\nA(headers) --\x3e B(context) --\x3e C(query) --\x3e D(body) --\x3e E(Handler) --\x3e F(response)"}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"end-point-with-route-parameters",children:"End Point with route parameters"}),"\n",(0,r.jsx)(n.h4,{id:"schemas",children:"Schemas"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// "path file" ~  ./src/app/api/example/exampleSchemas.ts\nimport { z } from "zod";\n\nexport const ExampleHeadersSchema = z.object({\n  params: z.object({\n    id: z.string().transform(Number)\n  })\n});\n\nexport type ExampleHeadersSchemaType = z.infer<typeof ExampleHeadersSchema>\n\n\nexport const ExampleBodySchema = z.object({\n  name: z.string(),\n});\n\nexport type ExampleBodySchemaType = z.infer<typeof ExampleBodySchema>\n\n'})}),"\n",(0,r.jsx)(n.h4,{id:"endpoint",children:"EndPoint"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// "path file" ~ ./src/app/api/example/[id]/route.ts\nimport { Route } from "@/utils/Route";\nimport { ExampleHeadersSchema, ExampleBodySchema } from \'../exampleSchemas\'\n\n// End Point PUT basic\nexport const PUT = Route({\n  schemas: {\n    body: ExampleBodySchema,\n    headers: ExampleHeadersSchema,\n  },\n  Handler(req, reply, context) {\n    const { id } = req.getHeaders().params\n\n    return reply.json({ message: "Hello World!" }, { status: 201 });\n  },\n});\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},4728:(e,n,t)=>{t.d(n,{I:()=>a,M:()=>i});var r=t(6651);const o={},s=r.createContext(o);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);